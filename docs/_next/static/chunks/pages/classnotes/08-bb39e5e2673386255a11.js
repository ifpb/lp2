(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{8153:function(n,e,s){"use strict";s.d(e,{Z:function(){return x}});var a=s(1717);function t(n,e,s,a,t,r,o){try{var l=n[r](o),d=l.value}catch(i){return void s(i)}l.done?e(d):Promise.resolve(d).then(a,t)}function r(n){return function(){var e=this,s=arguments;return new Promise((function(a,r){var o=n.apply(e,s);function l(n){t(o,a,r,l,d,"next",n)}function d(n){t(o,a,r,l,d,"throw",n)}l(void 0)}))}}var o=s(8742),l=s.n(o),d=s(7378),i=s(2541),m=s(6171),u=s(4246);function c(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),s.push.apply(s,a)}return s}function p(n){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){(0,a.Z)(n,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(s,e))}))}return n}function x(n){var e=n.src,s=n.code,a=n.lang,t=(0,d.useState)(""),o=t[0],c=t[1];return(0,d.useEffect)((function(){function n(){return(n=r(l().mark((function n(){var s,a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return s=n.sent,n.next=5,s.text();case 5:a=n.sent,c(a.trim());case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}s?c(s.trim()):function(){n.apply(this,arguments)}()}),[]),(0,u.jsx)(i.default,p(p({},i.defaultProps),{},{code:o,language:a,theme:m.default,children:function(n){var e=n.className,s=n.style,a=n.tokens,t=n.getLineProps,r=n.getTokenProps;return(0,u.jsx)("pre",{children:(0,u.jsx)("code",{className:e,style:s,children:a.map((function(n,e){return(0,u.jsx)("div",p(p({},t({line:n,key:e})),{},{children:n.map((function(n,e){return(0,u.jsx)("span",p({},r({token:n,key:e})))}))}))}))})})}}))}},6152:function(n,e,s){"use strict";s.r(e);var a=s(7397),t=s(1750),r=(s(7378),s(5318)),o=s(4955),l=s.n(o),d=s(7913),i=s(5979),m=(s(8579),s(8153)),u=["components"],c=function(n){return(0,d.withSSG)(l()({filename:"index.mdx",route:"/classnotes/08",meta:{},pageMap:[{name:"classnote",route:"/classnote"},{name:"classnotes",children:[{name:"01",children:[{name:"index",route:"/classnotes/01"},{name:"meta.json",meta:{index:"Aula 01"}}],route:"/classnotes/01"},{name:"02",children:[{name:"index",route:"/classnotes/02"},{name:"meta.json",meta:{index:"Aula 02"}}],route:"/classnotes/02"},{name:"03",children:[{name:"index",route:"/classnotes/03"},{name:"meta.json",meta:{index:"Aula 03"}}],route:"/classnotes/03"},{name:"04",children:[{name:"index",route:"/classnotes/04"},{name:"meta.json",meta:{index:"Aula 04"}}],route:"/classnotes/04"},{name:"05",children:[{name:"index",route:"/classnotes/05"},{name:"meta.json",meta:{index:"Aula 05"}}],route:"/classnotes/05"},{name:"06",children:[{name:"index",route:"/classnotes/06"},{name:"meta.json",meta:{index:"Aula 06"}}],route:"/classnotes/06"},{name:"07",children:[{name:"index",route:"/classnotes/07"},{name:"meta.json",meta:{index:"Aula 07"}}],route:"/classnotes/07"},{name:"08",children:[{name:"index",route:"/classnotes/08"},{name:"meta.json",meta:{index:"Aula 08"}}],route:"/classnotes/08"},{name:"meta.json",meta:{"01":{title:"Aula 01",type:"nav",hidden:!0},"02":{title:"Aula 02",type:"nav",hidden:!0},"03":{title:"Aula 03",type:"nav",hidden:!0},"04":{title:"Aula 04",type:"nav",hidden:!0},"05":{title:"Aula 05",type:"nav",hidden:!0},"06":{title:"Aula 06",type:"nav",hidden:!0},"07":{title:"Aula 07",type:"nav",hidden:!0},"08":{title:"Aula 08",type:"nav",hidden:!0}}}],route:"/classnotes"},{name:"content",route:"/content"},{name:"exams",children:[{name:"meta.json",meta:{projeto:"Projeto"}},{name:"projeto",route:"/exams/projeto"}],route:"/exams"},{name:"index",route:"/"},{name:"meta.json",meta:{index:"Disciplina",classnote:"Aulas",classnotes:{title:"Aulas",type:"nav",hidden:!0},content:"Conte\xfado",tools:"Ferramentas",exams:{title:"Exames",type:"nav",hidden:!0}}},{name:"tools",route:"/tools"}]},i.Z))(n)};function p(n){var e=n.components,s=(0,t.Z)(n,u);return(0,r.mdx)(c,(0,a.Z)({components:e},s),(0,r.mdx)("h1",null,"Cadastro de Usu\xe1rio"),(0,r.mdx)("h2",null,"Foods App"),(0,r.mdx)("img",{src:"/lp2/imgs/database-user/preview.png",alt:"Preview",width:"100%"}),(0,r.mdx)("h2",null,"Arquitetura do C\xf3digo"),(0,r.mdx)("p",null,(0,r.mdx)("img",{src:"/lp2/imgs/database-user/mvc.png",alt:"",parentName:"p"})),(0,r.mdx)("h2",null,"Estrutura de C\xf3digo"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{className:"language-txt",parentName:"pre"},"foods-app-user\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 package-lock.json\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 public\n\u2502   \u251c\u2500\u2500 css\n\u2502   \u2502   \u251c\u2500\u2500 bootstrap.min.css\n\u2502   \u2502   \u2514\u2500\u2500 bootstrap.min.css.map\n\u2502   \u251c\u2500\u2500 foods.html\n\u2502   \u251c\u2500\u2500 imgs\n\u2502   \u2502   \u251c\u2500\u2500 batatafrita.jpg\n\u2502   \u2502   \u251c\u2500\u2500 hamburguer.jpg\n\u2502   \u2502   \u251c\u2500\u2500 milkshake.jpg\n\u2502   \u2502   \u251c\u2500\u2500 sanduiche.jpg\n\u2502   \u2502   \u2514\u2500\u2500 suco.jpg\n\u2502   \u2514\u2500\u2500 js\n\u2502       \u251c\u2500\u2500 bootstrap.min.js\n\u2502       \u251c\u2500\u2500 bootstrap.min.js.map\n\u2502       \u251c\u2500\u2500 jquery.min.js\n\u2502       \u251c\u2500\u2500 popper.min.js\n\u2502       \u251c\u2500\u2500 popper.min.js.map\n\u2502       \u2514\u2500\u2500 services\n\u2502           \u2514\u2500\u2500 api.js\n\u251c\u2500\u2500 requests.http\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 controllers\n    \u2502   \u251c\u2500\u2500 categoriesController.js\n    \u2502   \u251c\u2500\u2500 foodsController.js\n    \u2502   \u2514\u2500\u2500 usersController.js\n    \u251c\u2500\u2500 db\n    \u2502   \u251c\u2500\u2500 database.sqlite\n    \u2502   \u251c\u2500\u2500 index.js\n    \u2502   \u251c\u2500\u2500 migration.js\n    \u2502   \u2514\u2500\u2500 seed.js\n    \u251c\u2500\u2500 index.js\n    \u251c\u2500\u2500 migrations\n    \u2502   \u2514\u2500\u2500 index.js\n    \u251c\u2500\u2500 models\n    \u2502   \u251c\u2500\u2500 Category.js\n    \u2502   \u251c\u2500\u2500 Food.js\n    \u2502   \u2514\u2500\u2500 User.js\n    \u251c\u2500\u2500 routes\n    \u2502   \u2514\u2500\u2500 index.js\n    \u251c\u2500\u2500 seeders\n    \u2502   \u251c\u2500\u2500 data.json\n    \u2502   \u2514\u2500\u2500 index.js\n    \u2514\u2500\u2500 views\n        \u251c\u2500\u2500 _menu.njk\n        \u251c\u2500\u2500 foods\n        \u2502   \u251c\u2500\u2500 _delete.njk\n        \u2502   \u251c\u2500\u2500 _form.njk\n        \u2502   \u2514\u2500\u2500 index.njk\n        \u251c\u2500\u2500 layout.njk\n        \u2514\u2500\u2500 users\n            \u251c\u2500\u2500 _form.njk\n            \u2514\u2500\u2500 create.njk\n")),(0,r.mdx)("p",null,(0,r.mdx)("a",{href:"https://codesandbox.io/s/interesting-agnesi-4o44h?fontsize=14&hidenavigation=1&theme=dark",parentName:"p"},(0,r.mdx)("img",{src:"https://codesandbox.io/static/img/play-codesandbox.svg",alt:"Edit foods-app-user",parentName:"a"}))),(0,r.mdx)("h2",null,"Load"),(0,r.mdx)("p",null,"src/\xecndex.js:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{className:"language-js",parentName:"pre"},"...\nconst app = express();\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\n\napp.use(express.static('public'));\n...\n")),(0,r.mdx)("h2",null,"Model"),(0,r.mdx)("p",null,(0,r.mdx)("img",{src:"/lp2/imgs/database-user/database.png",alt:"",parentName:"p"})),(0,r.mdx)("p",null,"src/migrations/index.js:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{className:"language-js",parentName:"pre"},"const { conn } = require('../db');\n\nasync function up() {\n  ...\n\n  await db.run(`\n    CREATE TABLE IF NOT EXISTS users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT,\n      email TEXT UNIQUE,\n      password TEXT\n    )\n  `);\n}\n\nasync function down() {\n  const db = await conn();\n\n  await db.run('DROP TABLE users');\n\n  ...\n}\n\nmodule.exports = { up, down };\n")),(0,r.mdx)("p",null,"src/seeders/index.js:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{className:"language-js",parentName:"pre"},"const Food = require('../models/Food');\nconst Category = require('../models/Category');\nconst User = require('../models/User');\nconst fs = require('fs');\nconst path = require('path');\n\nfunction up() {\n  const content = fs.readFileSync(path.join(__dirname, 'data.json'));\n  const data = JSON.parse(content);\n\n  ...\n\n  for (const user of data.users) {\n    User.create(user);\n  }\n}\n\nmodule.exports = { up };\n")),(0,r.mdx)("p",null,"src/seeders/data.json:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "foods": [\n    ...\n  ],\n  "categories": [\n    ...\n  ],\n  "users": [\n    {\n      "id": 1,\n      "name": "admin",\n      "email": "admin@email.com",\n      "password": "admin"\n    }\n  ]\n}\n')),(0,r.mdx)("p",null,"src/models/User.js:"),(0,r.mdx)(m.Z,{src:"/lp2/codes/database-user/foods-app-user/src/models/User.js",lang:"js",mdxType:"Code"}),(0,r.mdx)("pre",null,(0,r.mdx)("code",{className:"language-txt",parentName:"pre"},"$ npm install bcrypt\n$ npm run db:reload\n")),(0,r.mdx)("h2",null,"Controller"),(0,r.mdx)("p",null,"src/routes/index.js:"),(0,r.mdx)(m.Z,{src:"/lp2/codes/database-user/foods-app-user/src/routes/index.js",lang:"js",mdxType:"Code"}),(0,r.mdx)("p",null,"src/controllers/usersController.js:"),(0,r.mdx)(m.Z,{src:"/lp2/codes/database-user/foods-app-user/src/controllers/usersController.js",lang:"js",mdxType:"Code"}),(0,r.mdx)("h2",null,"View"),(0,r.mdx)("p",null,"src/views/users/create.njk:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{className:"language-html",parentName:"pre"},'{% raw %}\n{% extends "layout.njk" %}\n\n{% set title = "Cadastrar" %}\n\n{% block content %}\n<h1 class="mt-5 text-center">\n  {{ title }}\n</h1>\n\n<div class="row">\n  <div class="col-md-6 mx-auto mb-5">\n    <form id="formUser" action="/signup" method="post">\n      <div class="form-group">\n        <label for="user-name">Nome</label>\n        <input type="text" class="form-control" id="user-name" name="name">\n      </div>\n      <div class="form-group">\n        <label for="user-email">E-mail</label>\n        <input type="email" class="form-control" id="user-email" name="email">\n      </div>\n      <div class="form-group">\n        <label for="user-password">Senha</label>\n        <input type="password" class="form-control" id="user-password" name="password">\n      </div>\n      <div class="form-group">\n        <label for="user-confirm_password">Confirmar Senha</label>\n        <input type="password" class="form-control" id="user-confirm_password" name="confirm_password">\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary float-right">Confirmar</button>\n      </div>\n    </form>\n  </div>\n</div>\n{% endblock %}\n{% endraw %}\n')),(0,r.mdx)("p",null,"src/views/_menu.njk:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{className:"language-html",parentName:"pre"},'{% raw %}\n<ul class="navbar-nav ml-auto">\n  <li class="nav-item {% if title == "Menu" %}active{% endif %}">\n    <a class="nav-link" href="/">Menu </a>\n  </li>\n  <li class="nav-item {% if title == "Cadastrar" %}active{% endif %}">\n    <a class="nav-link" href="/signup">Cadastrar</a>\n  </li>\n</ul>\n{% endraw %}\n')))}p.isMDXComponent=!0,e.default=p},7735:function(n,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/classnotes/08",function(){return s(6152)}])}},function(n){n.O(0,[734,36,774,888,179],(function(){return e=7735,n(n.s=e);var e}));var e=n.O();_N_E=e}]);