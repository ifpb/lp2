(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{8153:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var a=t(1717);function d(e,n,t,a,d,o,r){try{var m=e[o](r),s=m.value}catch(p){return void t(p)}m.done?n(s):Promise.resolve(s).then(a,d)}function o(e){return function(){var n=this,t=arguments;return new Promise((function(a,o){var r=e.apply(n,t);function m(e){d(r,a,o,m,s,"next",e)}function s(e){d(r,a,o,m,s,"throw",e)}m(void 0)}))}}var r=t(8742),m=t.n(r),s=t(7378),p=t(2541),l=t(6171),i=t(4246);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e){var n=e.src,t=e.code,a=e.lang,d=(0,s.useState)(""),r=d[0],c=d[1];return(0,s.useEffect)((function(){function e(){return(e=o(m().mark((function e(){var t,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.next=5,t.text();case 5:a=e.sent,c(a.trim());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t?c(t.trim()):function(){e.apply(this,arguments)}()}),[]),(0,i.jsx)(p.default,x(x({},p.defaultProps),{},{code:r,language:a,theme:l.default,children:function(e){var n=e.className,t=e.style,a=e.tokens,d=e.getLineProps,o=e.getTokenProps;return(0,i.jsx)("pre",{children:(0,i.jsx)("code",{className:n,style:t,children:a.map((function(e,n){return(0,i.jsx)("div",x(x({},d({line:e,key:n})),{},{children:e.map((function(e,n){return(0,i.jsx)("span",x({},o({token:e,key:n})))}))}))}))})})}}))}},122:function(e,n,t){"use strict";t.r(n);var a=t(7397),d=t(1750),o=(t(7378),t(5318)),r=t(4955),m=t.n(r),s=t(7913),p=t(5979),l=(t(8579),t(8153),["components"]),i=function(e){return(0,s.withSSG)(m()({filename:"index.mdx",route:"/classnotes/04",meta:{},pageMap:[{name:"classnote",route:"/classnote"},{name:"classnotes",children:[{name:"01",children:[{name:"index",route:"/classnotes/01"},{name:"meta.json",meta:{index:"Aula 01"}}],route:"/classnotes/01"},{name:"02",children:[{name:"index",route:"/classnotes/02"},{name:"meta.json",meta:{index:"Aula 02"}}],route:"/classnotes/02"},{name:"03",children:[{name:"index",route:"/classnotes/03"},{name:"meta.json",meta:{index:"Aula 03"}}],route:"/classnotes/03"},{name:"04",children:[{name:"index",route:"/classnotes/04"},{name:"meta.json",meta:{index:"Aula 04"}}],route:"/classnotes/04"},{name:"05",children:[{name:"index",route:"/classnotes/05"},{name:"meta.json",meta:{index:"Aula 05"}}],route:"/classnotes/05"},{name:"meta.json",meta:{"01":{title:"Aula 01",type:"nav",hidden:!0},"02":{title:"Aula 02",type:"nav",hidden:!0},"03":{title:"Aula 03",type:"nav",hidden:!0},"04":{title:"Aula 04",type:"nav",hidden:!0},"05":{title:"Aula 05",type:"nav",hidden:!0}}}],route:"/classnotes"},{name:"content",route:"/content"},{name:"exams",children:[{name:"meta.json",meta:{projeto:"Projeto"}},{name:"projeto",route:"/exams/projeto"}],route:"/exams"},{name:"index",route:"/"},{name:"meta.json",meta:{index:"Disciplina",classnote:"Aulas",classnotes:{title:"Aulas",type:"nav",hidden:!0},content:"Conte\xfado",tools:"Ferramentas",exams:{title:"Exames",type:"nav",hidden:!0}}},{name:"tools",route:"/tools"}]},p.Z))(e)};function c(e){var n=e.components,t=(0,d.Z)(e,l);return(0,o.mdx)(i,(0,a.Z)({components:n},t),(0,o.mdx)("h1",null,"Constru\xe7\xe3o de API"),(0,o.mdx)("h2",null,"Back-end Web"),(0,o.mdx)("h3",null,"Rotas do Foods API"),(0,o.mdx)("table",null,(0,o.mdx)("thead",{parentName:"table"},(0,o.mdx)("tr",{parentName:"thead"},(0,o.mdx)("th",{parentName:"tr"},"M\xe9todo"),(0,o.mdx)("th",{parentName:"tr"},"Caminho"),(0,o.mdx)("th",{parentName:"tr"},"Par\xe2metro"),(0,o.mdx)("th",{parentName:"tr"},"Status"),(0,o.mdx)("th",{parentName:"tr"},"Resposta"))),(0,o.mdx)("tbody",{parentName:"table"},(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},"POST"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"/foods")),(0,o.mdx)("td",{parentName:"tr"},"Body"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"201")),(0,o.mdx)("td",{parentName:"tr"},"Cria uma nova comida")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},"GET"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"/foods")),(0,o.mdx)("td",{parentName:"tr"},"-"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"200")),(0,o.mdx)("td",{parentName:"tr"},"Retorna todas as comidas")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},"GET"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"/foods?name=Salada")),(0,o.mdx)("td",{parentName:"tr"},"Query"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"200")),(0,o.mdx)("td",{parentName:"tr"},"Retorna todas as comidas com o nome ",(0,o.mdx)("inlineCode",{parentName:"td"},"Salada"))),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},"GET"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"/foods/1")),(0,o.mdx)("td",{parentName:"tr"},"Route"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"200"),", ",(0,o.mdx)("inlineCode",{parentName:"td"},"400")),(0,o.mdx)("td",{parentName:"tr"},"Retorna a comida de ID 1")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},"PUT"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"/foods/1")),(0,o.mdx)("td",{parentName:"tr"},"Body, Route"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"200"),", ",(0,o.mdx)("inlineCode",{parentName:"td"},"400")),(0,o.mdx)("td",{parentName:"tr"},"Atualiza a comida de ID 1")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},"DELETE"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"/foods/1")),(0,o.mdx)("td",{parentName:"tr"},"Route"),(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"204"),", ",(0,o.mdx)("inlineCode",{parentName:"td"},"400")),(0,o.mdx)("td",{parentName:"tr"},"Exclui a comida de ID 1")))),(0,o.mdx)("h3",null,"HTTP Status Codes"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status",parentName:"li"},"Classes"),(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},"Respostas de informa\xe7\xe3o (100-199)"),(0,o.mdx)("li",{parentName:"ul"},"Respostas de sucesso (200-299)"),(0,o.mdx)("li",{parentName:"ul"},"Redirecionamentos (300-399)"),(0,o.mdx)("li",{parentName:"ul"},"Erros do cliente (400-499)"),(0,o.mdx)("li",{parentName:"ul"},"Erros do servidor (500-599)"))),(0,o.mdx)("li",{parentName:"ul"},"C\xf3digos do Foods API")),(0,o.mdx)("table",null,(0,o.mdx)("thead",{parentName:"table"},(0,o.mdx)("tr",{parentName:"thead"},(0,o.mdx)("th",{parentName:"tr"},"C\xf3digo"),(0,o.mdx)("th",{parentName:"tr"},"Nome"),(0,o.mdx)("th",{parentName:"tr"},"Significado"))),(0,o.mdx)("tbody",{parentName:"table"},(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"200")),(0,o.mdx)("td",{parentName:"tr"},"Ok"),(0,o.mdx)("td",{parentName:"tr"},"Solicita\xe7\xe3o gerada com sucesso")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"201")),(0,o.mdx)("td",{parentName:"tr"},"Created"),(0,o.mdx)("td",{parentName:"tr"},"Solicita\xe7\xe3o gerada com sucesso e um novo recurso foi criado como resultado")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"204")),(0,o.mdx)("td",{parentName:"tr"},"No Content"),(0,o.mdx)("td",{parentName:"tr"},"Solicita\xe7\xe3o gerada com sucesso e n\xe3o h\xe1 conte\xfado para ser enviado")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"400")),(0,o.mdx)("td",{parentName:"tr"},"Bad Request"),(0,o.mdx)("td",{parentName:"tr"},"Solicita\xe7\xe3o n\xe3o compreendida por motivos de erro")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"404")),(0,o.mdx)("td",{parentName:"tr"},"Not Found"),(0,o.mdx)("td",{parentName:"tr"},"O servidor n\xe3o pode encontrar o recurso solicitado")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr"},(0,o.mdx)("inlineCode",{parentName:"td"},"500")),(0,o.mdx)("td",{parentName:"tr"},"Internal Server Error"),(0,o.mdx)("td",{parentName:"tr"},"O servidor encontrou uma situa\xe7\xe3o com a qual n\xe3o sabe lidar.")))),(0,o.mdx)("h3",null,"Estrutura do C\xf3digo"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-txtods-api",parentName:"pre"},"\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 package-lock.json\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 requests.http\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 index.js\n")),(0,o.mdx)("p",null,(0,o.mdx)("a",{href:"https://codesandbox.io/s/foods-api-zedcj?fontsize=14&hidenavigation=1&theme=dark",parentName:"p"},(0,o.mdx)("img",{src:"https://codesandbox.io/static/img/play-codesandbox.svg",alt:"Edit foods-api",parentName:"a"}))),(0,o.mdx)("p",null,"src/index.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"const express = require('express');\nconst cors = require('cors');\n\nconst app = express();\n\napp.use(cors()); // Access-Control-Allow-Origin: *\napp.use(express.json());\n\nlet key = 1;\nconst foods = [];\n")),(0,o.mdx)("h3",null,"Create"),(0,o.mdx)("p",null,(0,o.mdx)("img",{src:"/lp2/imgs/rest-api/create-food.png",alt:"",parentName:"p"})),(0,o.mdx)("p",null,"src/index.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"app.post('/foods', (req, res) => {\n  const { name, price } = req.body;\n\n  const id = key++;\n\n  const food = { id, name, price };\n\n  foods.push(food);\n\n  res.status(201).json(food);\n});\n")),(0,o.mdx)("p",null,"requests.http:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-txt",parentName:"pre"},'### Create Food (Salada)\n\nPOST http://localhost:3000/foods\nContent-Type: application/json\n\n{\n  "name": "Salada 1",\n  "price": 15.5\n}\n')),(0,o.mdx)("p",null,"CodeSandBox: ",(0,o.mdx)("a",{href:"https://reqbin.com/kxrzigfx",parentName:"p"},"Create (REQBIN)")),(0,o.mdx)("h3",null,"Read"),(0,o.mdx)("p",null,(0,o.mdx)("img",{src:"/lp2/imgs/rest-api/read-foods.png",alt:"",parentName:"p"})),(0,o.mdx)("p",null,"src/index.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"app.get('/foods', (req, res) => {\n  const { name } = req.query;\n\n  if (name) {\n    const filteredFoods = foods.filter((food) => food.name.includes(name));\n\n    return res.json(filteredFoods);\n  }\n\n  res.json(foods);\n});\n")),(0,o.mdx)("p",null,"requests.http:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-txt",parentName:"pre"},"### Read Foods\n\nGET http://localhost:3000/foods\n\n\n### Read Foods by Name\n\nGET http://localhost:3000/foods?name=Salada\n")),(0,o.mdx)("p",null,"CodeSandBox: ",(0,o.mdx)("a",{href:"https://zedcj.sse.codesandbox.io/foods",parentName:"p"},"Read"),", ",(0,o.mdx)("a",{href:"https://zedcj.sse.codesandbox.io/foods?name=Salada",parentName:"p"},"Read by Name")),(0,o.mdx)("p",null,(0,o.mdx)("img",{src:"/lp2/imgs/rest-api/read-food-by-id.png",alt:"",parentName:"p"})),(0,o.mdx)("p",null,"src/index.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"app.get('/foods/:id', (req, res) => {\n  const id = Number(req.params.id);\n\n  const food = foods.find((food) => food.id === id);\n\n  if (food) {\n    return res.json(food);\n  } else {\n    return res.status(400).json({ error: 'Food not found.' });\n  }\n});\n")),(0,o.mdx)("p",null,"requests.http:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-txt",parentName:"pre"},"### Read Food by ID\n\nGET http://localhost:3000/foods/1\n")),(0,o.mdx)("p",null,"CodeSandBox: ",(0,o.mdx)("a",{href:"https://zedcj.sse.codesandbox.io/foods/1",parentName:"p"},"Read by ID")),(0,o.mdx)("h3",null,"Update"),(0,o.mdx)("p",null,(0,o.mdx)("img",{src:"/lp2/imgs/rest-api/update-food.png",alt:"",parentName:"p"})),(0,o.mdx)("p",null,"src/index.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"app.put('/foods/:id', (req, res) => {\n  const id = Number(req.params.id);\n  const { name, price } = req.body;\n\n  const index = foods.findIndex((food) => food.id === id);\n\n  if (index >= 0) {\n    const food = { id, name, price };\n\n    foods[index] = food;\n\n    res.json(food);\n  } else {\n    return res.status(400).json({ error: 'Food not found.' });\n  }\n});\n")),(0,o.mdx)("p",null,"requests.http:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-txt",parentName:"pre"},'### Update Food\n\nPUT http://localhost:3000/foods/1\nContent-Type: application/json\n\n{\n  "name": "Salada 1",\n  "price": 16.5\n}\n')),(0,o.mdx)("p",null,"CodeSandBox: ",(0,o.mdx)("a",{href:"https://reqbin.com/ngkkunqu",parentName:"p"},"Update (REQBIN)")),(0,o.mdx)("h3",null,"Delete"),(0,o.mdx)("p",null,(0,o.mdx)("img",{src:"/lp2/imgs/rest-api/delete-food.png",alt:"",parentName:"p"})),(0,o.mdx)("p",null,"src/index.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"app.delete('/foods/:id', (req, res) => {\n  const id = Number(req.params.id);\n\n  const index = foods.findIndex((food) => food.id === id);\n\n  if (index >= 0) {\n    foods.splice(index, 1);\n\n    res.status(204).send();\n  } else {\n    return res.status(400).json({ error: 'Food not found.' });\n  }\n});\n")),(0,o.mdx)("p",null,"requests.http:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-txt#",metastring:"Delete Food",Delete:!0,Food:!0,parentName:"pre"},"\nDELETE http://localhost:3000/foods/1\n")),(0,o.mdx)("p",null,"CodeSandBox: ",(0,o.mdx)("a",{href:"https://reqbin.com/epd9hrqo",parentName:"p"},"Delete (REQBIN)")),(0,o.mdx)("h2",null,"Front-end Web"),(0,o.mdx)("h3",null,"Estrutura do C\xf3digo"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-txt",parentName:"pre"},"foods-client\n\u251c\u2500\u2500 index.html\n\u2514\u2500\u2500 js\n    \u251c\u2500\u2500 index.js\n    \u2514\u2500\u2500 services\n        \u2514\u2500\u2500 api.js\n")),(0,o.mdx)("p",null,(0,o.mdx)("a",{href:"https://codesandbox.io/s/foods-client-m91qk?fontsize=14&hidenavigation=1&theme=dark",parentName:"p"},(0,o.mdx)("img",{src:"https://codesandbox.io/static/img/play-codesandbox.svg",alt:"Edit foods-client",parentName:"a"}))),(0,o.mdx)("h3",null,"Create"),(0,o.mdx)("p",null,"js/services/api.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"const api = 'http://127.0.0.1:3000';\n\nasync function create(food) {\n  const res = await fetch(`${api}/foods`, {\n    method: 'post',\n    body: JSON.stringify(food),\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n    },\n  });\n\n  return await res.json();\n}\n")),(0,o.mdx)("h3",null,"Read"),(0,o.mdx)("p",null,"js/services/api.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"async function readAll() {\n  const res = await fetch(`${api}/foods`);\n\n  return await res.json();\n}\n\nasync function readByName(name) {\n  const res = await fetch(`${api}/foods?name=${name}`);\n\n  return await res.json();\n}\n\nasync function readById(id) {\n  const res = await fetch(`${api}/foods/${id}`);\n\n  return await res.json();\n}\n")),(0,o.mdx)("h3",null,"Update"),(0,o.mdx)("p",null,"js/services/api.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"async function update(id, food) {\n  const res = await fetch(`${api}/foods/${id}`, {\n    method: 'put',\n    body: JSON.stringify(food),\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n    },\n  });\n\n  return await res.json();\n}\n")),(0,o.mdx)("h3",null,"Delete"),(0,o.mdx)("p",null,"js/services/api.js:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{className:"language-js",parentName:"pre"},"async function remove(id) {\n  await fetch(`${api}/foods/${id}`, {\n    method: 'delete',\n  });\n}\n")))}c.isMDXComponent=!0,n.default=c},6207:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/classnotes/04",function(){return t(122)}])}},function(e){e.O(0,[734,36,774,888,179],(function(){return n=6207,e(e.s=n);var n}));var n=e.O();_N_E=n}]);